<!--pages/forecast/forecast.wxml-->
<!-- ËøîÂõûÂâç‰∏ÄÈ°µ -->
<goBack></goBack>
<!-- <menu></menu> -->
<!-- È¢ÑÊµãÈ°µÈù¢ start-->
<scroll-view scroll-y="{{true}}" class="page" style="height: {{forecastHeight}}px;">
  <!-- topÊåâÈíÆ  start-->
  <view class="topBtn">
    <!-- È¢ÑÊµã -->
    <view class="forecastBtn" bindtap="onClickForecast">
      <l-button l-class="l-button-forecast"><text class="forecastTitle" decode="{{true}}">È¢Ñ&nbsp;&nbsp;Êµã&nbsp;&nbsp;</text>
        <l-icon name="edit" size="30" color="white" />
      </l-button>
    </view>
    <!-- ÂàáÊç¢Ê∞îË±°Á´ô -->
    <view class="changeStations">
      <changeStation class="changeStationBtn"></changeStation>
    </view>
  </view>
  <!-- topÊåâÈíÆ  end-->
  <l-popup show="{{popupSelect}}" l-class="popup">
    <view class="condition">
      <view class="condition-title">
        <l-icon name="yuce" size="55" l-class="iconfont tongjiicon"></l-icon>
        <text decode="{{true}}">È¢Ñ&nbsp;&nbsp;Êµã</text>
      </view>
      <view class="condition-data">
        <picker class="picker" mode="date" start="{{startTime}}" header-text="ÈÄâÊã©Êó∂Èó¥" value="{{forecastTime}}" bindtap="onClickforecastTime" bindchange="bindStartDateChange">
          <view class="start">
            <view class="dleft"><text decode="{{true}}">È¢Ñ&nbsp;Êµã&nbsp;Êó∂&nbsp;Èó¥&nbsp;:</text></view>
            <view class="dright">
              <text>{{forecastTime}}</text>
            </view>
          </view>
          <view class="hr"></view>
        </picker>

      </view>
      <view class="condition-factor">
        <view class="condition-factor-title"><text class="condition-text" decode="{{true}}">Ê∞î&nbsp;Ë±°&nbsp;Âõ†&nbsp;Á¥†&nbsp;:</text></view>
        <view class="condition-factor-content">
          <radio-group class="group" bindchange="radioChange">
            <view class="radio" wx:for="{{radioItems}}" wx:key="index">
              <radio color="rgb(57, 99, 188)" id="{{item.value}}" value="{{index+1}}" checked="{{item.isChecked}}"></radio>
              <l-icon name='{{item.icon}}' size="35" l-class="iconfont" />
              <label class="label" for="{{item.value}}"><text decode="{{true}}">&nbsp;{{item.value}}</text></label>
            </view>
          </radio-group>
        </view>
      </view>
      <view class="condition-btn">
        <l-button bind:lintap="confirm">Á°Æ ËÆ§</l-button>
        <l-button bg-color="rgba(102, 102, 102, 0.55)" bind:lintap="close">Âèñ Ê∂à</l-button>
      </view>
    </view>
  </l-popup>

  <l-toast id="my-toast" />

  <!-- Â±ïÁ§∫ÂÜÖÂÆπ start-->
  <view class="content">
    <!-- Ê∞îÊ∏©ÊòæÁ§∫ start-->
    <view class="card">
      <view class="data-time">
        <wxs src="../../utils/date.wxs" module="tools" />
        {{forecastTime==="yyyy-mm-dd"?tools.subStrDate(startTime):tools.subStrDate(forecastTime)}}
      </view>
      <view class="templement">
        <view class="templement-photo">
          <!-- https://gd-hbimg.huaban.com/f789fd60b1fa753bbd0c66c835f48dafb83080a112328-DCYnoK_fw240webp -->
          <image src="https://gd-hbimg.huaban.com/f789fd60b1fa753bbd0c66c835f48dafb83080a112328-DCYnoK_fw240webp" mode="widthFix" class="photo"></image>
        </view>
        <view class="templement-date">
          <text style="color: white; font-size: 45rpx;">{{predict[0].values}} ‚ÑÉ</text>
          <text style="color: white;font-size: 43rpx;letter-spacing:10rpx">{{station}}</text>
        </view>
      </view>
      <view class="templement-name">Temperature</view>
    </view>
    <!-- Ê∞îÊ∏©ÊòæÁ§∫ end-->
    <view class="factorcard">
      <view class="factorcard-title">
        <text class="factorcard-text" decode="{{true}}">Ê∞î&nbsp;Ë±°&nbsp;Âõ†&nbsp;Á¥†</text>
      </view>

      <!-- Ê∏©È¶®ÊèêÁ§∫ -->
      <view class="tip" wx:for="{{factor}}" wx:key="index" wx:if="{{factor===1}}">
        <!-- Â∑¶ËæπÈÉ®ÂàÜ -->
        <view class="tip-left">
          <wxs src="../../utils/date.wxs" module="tools" />
          <view class="tip-ltop"><text>{{tools.FactorChineseToEnglish(predict[index+1].name)}}</text></view>
          <view class="tip-ricon">
            <l-icon name="{{predict[index+1].icon}}" size="130" l-class="iconfont" style="padding-right: 40rpx;"></l-icon>
          </view>
        </view>
        <!-- üí°Ê†πÊçÆÊÉÖÂÜµËÄåÂÆö -->
        <!-- Â¶ÇÊûúÊòØPM2.5 Êàñ pm10 Áî®ÂõæÂÉèÊòæÁ§∫ -->
        <view class="tip-right" wx:if="{{predict[index+1].icon===2 || predict[index+1].icon===7 ||predict[index+1].icon ===8 }}">
          <view class="my-chart">
            <ec-canvas type="2d" class="echart" id="mychart-dom" canvas-id="mychart" ec="{{ec}}"></ec-canvas>
          </view>
          <view class="bpm2">
            <view class="bpm1">
              <view>{{predict[index+1].values}}</view>
              <view class="bpm">
                <view>
                  <image src="https://gd-hbimg.huaban.com/211987ac7716db139c7b309f41782e99d35929f91703-sU9Tmd_fw658" style="width:40rpx;height:40rpx"></image>
                </view>
                <view>{{predict[index+1].company}}</view>
              </view>
            </view>
            <wxs src="../../utils/date.wxs" module="tools" />
            <view class="judge">
              {{tools.judge(predict[index+1].icon,predict[index+1].values)}}
            </view>
          </view>
        </view>
        <!-- ÂÖ∂‰ªñÊòØÊñáÊú¨ -->
        <view class="tip-right" wx:else>
          <!-- <wxs src="../../utils/date.wxs" module="tools" /> -->
          <view class="tip-rtop">
            <text class="tip-rtop-text" decode="{{true}}">{{predict[index+1].values}}&nbsp;{{predict[index+1].company}}</text>
            <wxs src="../../utils/date.wxs" module="tools" /> 
            <text class="tip-rtop-text1">{{tools.judge(predict[index+1].icon,predict[index+1].values)}}</text>

          </view>
        </view>
      </view>


      <!-- Âõ†Á¥†Ê∞îË±° -->
      <view class="factor" wx:if="{{factor===4}}">
        <block wx:for="{{factor}}" wx:key="index">
          <view class="factor-view">
            <view class="factor-left">
              <l-icon name="{{predict[index+1].icon}}" size="50" l-class="iconfont" style="padding-right: 40rpx;"></l-icon>
              {{predict[index+1].name}}
            </view>
            <view class="factor-right">
              <text>{{predict[index+1].values}}{{predict[index+1].company}}</text>
            </view>
          </view>
        </block>
      </view>

      <!-- ÈÄâÊã©‰ª•ÂêéÁöÑÊ∞îË±°Âõ†Á¥†ÊèêÈÜí -->
      <view class="factorS" wx:else="{{factor===1}}">
        <block wx:for="{{factor}}" wx:key="index">
          <view class="factor-viewS">
            <view class="factor-top">
              <l-icon name="{{predict[index+1].icon}}" size="50" l-class="iconfont" style="padding-right: 40rpx;"></l-icon>
              {{predict[index+1].name}}
            </view>
            <view class="factor-bottom">
              <wxs src="../../utils/date.wxs" module="tools" />
              <image src="{{tools.FactorChineseToTip(predict[index+1].name)}}" mode="widthFix" wx:if="{{predict[index+1].icon===2 || predict[index+1].icon===4 || predict[index+1].icon===5 || predict[index+1].icon===6 || predict[index+1].icon===7 ||  predict[index+1].icon===8}}"></image>

              <!-- <view class="my-chart-tip" wx:if="{{predict[index+1].icon===2}}">
                <ec-canvas type="2d" class="echart-tip" id="mychart-dom-tip" canvas-id="mychart" ec="{{ectip}}"></ec-canvas>
              </view> -->

              <text decode="{{true}}" wx:else>{{tools.FactorChineseToTip(predict[index+1].name)}}</text>
            </view>
          </view>
        </block>
      </view>

    </view>
  </view>
  <!-- Â±ïÁ§∫ÂÜÖÂÆπ end-->
</scroll-view>
<!-- È¢ÑÊµãÈ°µÈù¢ end-->